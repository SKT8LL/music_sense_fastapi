# FLO SENSE Project Context & Rules

This document defines the rules for using AI tools (Antigravity/LLM) and the TDD/CI principles for the FLO SENSE project. All team members and AI assistants must follow these guidelines.

## 1. Common Principles

1.  **Human-Led Architecture**:
    -   Project structure, settings, logger, DB connection, and basic internal routing are designed by the human lead (e.g., Sangyeop).
    -   AI tools are used for "partial code assistance" (specific function implementation, test scaffolding).
2.  **Tools as "Draft Generators"**:
    -   Code generated by tools must be reviewed and refactored by a human before committing.
    -   If it doesn't fit the project style, discard or rewrite it.
3.  **Separation of Concerns**:
    -   Strictly separate API (Router) / Service / Data (ORM) / Settings.
    -   Request small, atomic units of work from AI (e.g., "Write a test for X function").
4.  **CI Pipeline Constraint**:
    -   `pytest` runs automatically in CI.
    -   **Breaking tests cannot be merged to main.**

## 2. TDD Principles: "Tests First, Implementation Later"

We enforce TDD (Test Driven Development).

### Procedure
1.  **Design Test**: Define scenarios (Success/Error/Edge cases).
2.  **Write Test Code**: Create `tests/test_xxx.py` *before* implementation.
3.  **Verify Failure**: Run `pytest` and confirm it fails (Red).
4.  **Implement**: Write the minimal code to pass the test (Green).
5.  **Refactor**: Improve code quality while keeping tests green.

## 3. Tool Usage Guidelines

### Allowed
-   Implementing specific functions/methods (e.g., ONNX inference logic, Numpy conversion).
-   Drafting test code (e.g., scaffolding `tests/test_health.py`).
-   Drafting documentation (README, API Spec).
-   Simple refactoring suggestions.

### Prohibited
-   Generating the entire project structure from scratch.
-   Arbitrarily modifying `requirements.txt` (unless requested).
-   Auto-generating DB schemas without review.
-   Implementing security/auth logic without human review.

## 4. Documentation Structure
-   `setup/`: Setup guides and context.
-   `docs/api_spec.md`: API Specification.
-   `docs/llm_usage_guide.md`: This file.
